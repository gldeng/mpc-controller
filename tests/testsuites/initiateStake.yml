name: Initiate stake test suite

vars:
  ROLE_DEFAULT_ADMIN: 0x8db97C7cEcE249c2b98bDC0226Cc4C2A57BF52FC
  ROLE_DEFAULT_ADMIN_PK: 56289e99c94b6912bfc12adc093c9b51124f0dc54ac7a766b2bc5ccf558d8027
  C_CHAIN_RPC_URL: http://127.0.0.1:9650/ext/bc/C/rpc

testcases:
  - name: readAvaLidoAddress
    steps:
      - type: readfile
        path: MYHOME/mpctest/contracts/addresses/AVALIDO_ADDRESS
        vars:
          content:
            from: result.content
        assertions:
          - result.content ShouldNotBeEmpty

  - name: initiate stake
    steps:
      - script: cast send --rpc-url {{.C_CHAIN_RPC_URL}} --from {{.ROLE_DEFAULT_ADMIN}} --private-key {{.ROLE_DEFAULT_ADMIN_PK}} --gas-limit 900000 {{.readAvaLidoAddress.content}} "initiateStake()"
        assertions: # todo: to improve assertion
          - result.systemout ShouldNotBeEmpty